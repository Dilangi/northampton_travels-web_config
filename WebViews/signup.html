<html>
    <head>
        <title>Northampton Travels</title>
        <style>
            #logo-section { 
                width: 100%;
                height: 30vh;
                background-image: url('../Images/logo.png');
                background-repeat: no-repeat;
                background-size: cover;
                background-position: center;
            }
      
            main {
                position: absolute;
                left: 40%;
            }
            p{
                font-size: 20px;
                margin-top:20px;
            }
            input{
                font-size: 18px;
                padding:10px;
                width:100%;
            }
            button{
                font-size: 20px;
                color: white;
                margin:20px 50px;
                padding:20px 50px;
                background: url('../Images/btn_background.png');
                border-radius:30px;
            }
        </style>
        <script>
            function validate(event) {
                //assign user inputs to variables
                var form =document.forms["registerForm"];
                var password = form.elements["password"].value;
                var confirmPassword = form.elements["confirmPassword"].value;
                
                //check whether password correctly entered
                if(password!=confirmPassword){
                    alert("Password mismatch!");
                    event.preventDefault();
                    return false;
                }

                return true;
            }
            
            function redirectToNextPage() {
                window.location.href = './login.php';
            }

            function addUser(event){
                if (validate()){
                    var formData = new FormData(form);

                    var form =document.forms["registerForm"];
                    form.action = "../user.php?op=1&addUser";
                    form.method="POST";

                    const xhr = new XMLHttpRequest();
                    xhr.open(form.method, form.action);
                    xhr.onreadystatechange = () => {
                        if (xhr.readyState === XMLHttpRequest.DONE) {
                            if (xhr.status === 200) {
                                alert("Successfully Registered!");
                                redirectToNextPage();
                            } else {
                                alert('Error submitting form');
                            }
                        }
                    };
                    xhr.send(formData);
                }
            }
        </script>
    </head>
    <body>
        <div id="logo-section"></div>
        <main>
            <form id="registerForm" onsubmit="addUser(event)">
                <p>First Name*: </p>
                <input type="text" name="firstName" placeholder="First Name" required/>
                <p>Last Name: </p>
                <input type="text" name="lastName" placeholder="Last Name"/>
                <p>Email*: </p>
                <input type="email" name="email" placeholder="Email" required/>
                <p>Username*: </p>
                <input type="text" name="username" placeholder="Username" required/>
                <p>Password*: </p>
                <input type="password" name="password" placeholder="Password" required/>
                <p>Confirm Password*: </p>
                <input type="password" name="confirmPassword" placeholder="Confirm Password" required/>
                <br></br>
                <button type="submit">SIGNUP</button>
            </form>
        </main>
    </body>
</html>
